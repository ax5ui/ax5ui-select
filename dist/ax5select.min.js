"use strict";!function(t,e){var i=ax5.util,n=function(){var t,n=this;e&&e.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",title:"",animateTime:250},this.activeSelect=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,t=this.config;var s=function(t,e){return t&&t.onStateChanged?t.onStateChanged.call(e,e):this.onStateChanged&&this.onStateChanged.call(e,e),!0},c=function(){var t={click:function(t,e,i){n.open(t,e)}};return function(e,i){var n;return e.content?(n="INPUT"==e.target.tagName.toUpperCase()?e.$target:e.$target.find('input[type="text"]'),n.unbind("click.ax5picker").bind("click.ax5picker",t.click.bind(this,this.queue[i],i)),n=null,e=null,i=null,this):(console.log(ax5.info.getError("ax5select","501","bind")),this)}}(),a=function(t,e){return'\n                <div class="ax5-ui-select {{theme}}" id="{{id}}" data-select-els="root">\n                    <div class="ax-select-body">\n                        <div class="ax-select-contents" data-select-els="contents" style="width:{{contentWidth}}px;"></div>\n                    </div>\n                    <div class="ax-select-arrow"></div>\n                </div>\n                '},u=function(t){if(!this.activeSelect)return this;var e=this.queue[this.activeSelectQueueIndex],i={},n={};t&&jQuery(document.body).append(this.activeSelect),i=e.$target.offset(),n={width:e.$target.outerWidth(),height:e.$target.outerHeight()},e.direction&&""!==e.direction&&"auto"!==e.direction||(e.direction="top"),t&&this.activeSelect.addClass("direction-"+e.direction),this.activeSelect.css(function(){return"top"==e.direction?{left:i.left+n.width/2-this.activeSelect.outerWidth()/2,top:i.top+n.height+12}:"bottom"==e.direction?{left:i.left+n.width/2-this.activeSelect.outerWidth()/2,top:i.top-this.activeSelect.outerHeight()-12}:"left"==e.direction?{left:i.left+n.width+12,top:i.top-n.height/2}:"right"==e.direction?{left:i.left-this.activeSelect.outerWidth()-12,top:i.top-n.height/2}:void 0}.call(this))},l=function(t,e){if(!this.activeSelect)return this;var n=this.queue[this.activeSelectQueueIndex];return e=i.findParentNode(t.target,function(t){return t.getAttribute("data-picker-els")?!0:n.$target.get(0)==t?!0:void 0}),e?this:(this.close(),this)},o=function(t){t.keyCode==ax5.info.eventKeys.ESC&&this.close()};this.init=function(){this.onStateChanged=t.onStateChanged},this.bind=function(e){var n,s={};return jQuery.extend(!0,s,t),e&&jQuery.extend(!0,s,e),e=s,e.target?(e.$target=jQuery(e.target),e.id||(e.id=e.$target.data("ax5-select")),e.id||(e.id="ax5-select-"+ax5.getGuid(),e.$target.data("ax5-select",e.id)),n=i.search(this.queue,function(){return this.id==e.id}),-1===n?(this.queue.push(e),c.call(this,e,this.queue.length-1)):(this.queue[n]=e,c.call(this,this.queue[n],n)),s=null,n=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){var e={};return function(n,c,h){return i.isString(n)&&"undefined"==typeof c&&(c=ax5.util.search(this.queue,function(){return this.id==n}),n=this.queue[c],-1==c)?(console.log(ax5.info.getError("ax5select","402","open")),this):(this.openTimer&&clearTimeout(this.openTimer),this.activeSelect?this.activeSelectQueueIndex==c?this:h>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(n,c,(h||0)+1)}.bind(this),t.animateTime),this):(this.activeSelect=jQuery(ax5.mustache.render(a.call(this,n,c),n)),this.activeSelectQueueIndex=c,e.call(this,n,c),u.call(this,"append"),jQuery(window).bind("resize.ax5select",function(){u.call(this)}.bind(this)),jQuery(window).bind("keyup.ax5select",function(t){t=t||window.event,o.call(this,t),i.stopEvent(t)}.bind(this)),jQuery(window).bind("click.ax5select",function(t){t=t||window.event,l.call(this,t),i.stopEvent(t)}.bind(this)),s.call(this,n,{self:this,state:"open",boundObject:n}),this))}}(),this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelect?(e=this.queue[this.activeSelectQueueIndex],this.activeSelect.addClass("destroy"),jQuery(window).unbind("resize.ax5select"),jQuery(window).unbind("click.ax5select"),jQuery(window).unbind("keyup.ax5select"),this.closeTimer=setTimeout(function(){this.activeSelect&&this.activeSelect.remove(),this.activeSelect=null,this.activeSelectQueueIndex=-1,s.call(this,e,{self:this,state:"close"})}.bind(this),t.animateTime),this):this},this.main=function(){arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};t.select=function(){return i.isFunction(e)&&(n.prototype=new e),n}()}(ax5.ui,ax5.ui.root),ax5.ui.select_instance=new ax5.ui.select,$.fn.ax5select=function(){return function(t){return"undefined"==typeof t&&(t={}),$.each(this,function(){var e={target:this};t=$.extend(!0,t,e),ax5.ui.select_instance.bind(t)}),this}}();