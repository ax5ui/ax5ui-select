"use strict";!function(e,t){var i=ax5.util,n=function(){var e,n=this;t&&t.call(this),this.queue=[],this.config={clickEventName:"click",theme:"default",title:"",animateTime:250,lang:{emptyOfSelected:"",multipleLabel:'"{{label}}"외 {{length}}건'},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,e=this.config;var s=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),!0},o=function(e){return'\n                <div class="ax5-ui-select-option-group {{theme}}" data-ax5-select-option-group="{{id}}">\n                    <div class="ax-select-body">\n                        <div class="ax-select-option-group-content" data-select-els="content">\n                        {{#options}}\n                            <div>{{'+e.optionValue+"}} // {{"+e.optionText+"}}// {{"+e.optionSelected+'}}</div>\n                        {{/options}}\n                        </div>\n                    </div>\n                    <div class="ax-select-arrow"></div>\n                </div>\n                '},l=function(){return'\n                <a class="form-control {{formSize}} ax5-ui-select-display {{theme}}" data-ax5-select-display="{{id}}">\n                    <div class="ax5-ui-select-display-table" data-select-els="display-table">\n                        <div data-ax5-select-display="label">{{label}}</div>\n                        <div data-ax5-select-display="addon" data-ax5-select-opened="false">\n                            {{#icons}}\n                            <span class="addon-icon-closed">{{clesed}}</span>\n                            <span class="addon-icon-opened">{{opened}}</span>\n                            {{/icons}}\n                            {{^icons}}\n                            <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n                            <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n                            {{/icons}}\n                        </div>\n                    </div>\n                </a>\n                '},c=function(){for(var e,t=this.queue.length;t--;)this.queue[t].$display&&(this.queue[t].$display.css({width:"auto"}),e=Math.max(this.queue[t].select.outerWidth(),this.queue[t].$display.find('[data-select-els="display-table"]').outerWidth()),this.queue[t].$display.css({width:e,height:this.queue[t].select.outerHeight()}));return this},a=function(e){if(!this.activeSelectOptionGroup)return this;var t=this.queue[this.activeSelectQueueIndex],i={},n={};e&&jQuery(document.body).append(this.activeSelectOptionGroup),i=t.$target.offset(),n={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activeSelectOptionGroup.addClass("direction-"+t.direction),this.activeSelectOptionGroup.css(function(){return"top"==t.direction?{left:i.left+n.width/2-this.activeSelectOptionGroup.outerWidth()/2,top:i.top+n.height+12}:"bottom"==t.direction?{left:i.left+n.width/2-this.activeSelectOptionGroup.outerWidth()/2,top:i.top-this.activeSelectOptionGroup.outerHeight()-12}:"left"==t.direction?{left:i.left+n.width+12,top:i.top-n.height/2}:"right"==t.direction?{left:i.left-this.activeSelectOptionGroup.outerWidth()-12,top:i.top-n.height/2}:void 0}.call(this))},u=function(e,t){if(!this.activeSelectOptionGroup)return this;var n=this.queue[this.activeSelectQueueIndex];return t=i.findParentNode(e.target,function(e){return e.getAttribute("data-picker-els")?!0:n.$target.get(0)==e?!0:void 0}),t?this:(this.close(),this)},r=function(e){e.keyCode==ax5.info.eventKeys.ESC&&this.close()},d=function(){var t={click:function(e,t,i){n.open(e,t)}},s=function(t,n){var s=[];return i.isArray(t.selected)&&t.selected.length>0?t.selected.forEach(function(t){t.selected&&s.push(t[e.columnKeys.optionText])}):t.options[0]?s[0]=t.options[0][e.columnKeys.optionText]:s[0]="",function(){if(t.multiple&&s.length>1){var i={label:s[0],length:s.length-1};return ax5.mustache.render(e.lang.multipleLabel,i)}return s[0]}()};return function(e,i){var n={};return e.$display||(h.call(this,e,i,e.options),n.id=e.id,n.label=s.call(this,e,i),n.formSize=function(){return e.select.hasClass("input-lg")?"input-lg":e.select.hasClass("input-sm")?"input-sm":void 0}(),e.$display=jQuery(ax5.mustache.render(l.call(this,e,i),n)),e.$target.append(e.$display),c.call(this),e.$display.unbind("click.ax5select").bind("click.ax5select",t.click.bind(this,this.queue[i],i))),n=null,e=null,i=null,this}}(),h=function(){var t=function(e,t,i){i?e.multiple?e.selected.push(jQuery.extend({},i)):e.selected[0]=jQuery.extend({},i):e.selected=[]};return function(n,s,o){var l,c,a;return t(n,s,!1),o?(n.options=[].concat(o),l=[],n.options.forEach(function(i,o){l.push('<option value="'+i[e.columnKeys.optionValue]+'" '+(i[e.columnKeys.optionSelected]?' selected="selected"':"")+">"+i[e.columnKeys.optionText]+"</option>"),i[e.columnKeys.optionSelected]&&t(n,s,i)}),n.select.html(l.join(""))):(c=i.toArray(n.select.get(0).options),a=[],c.forEach(function(i,o){var l={};l[e.columnKeys.optionValue]=i.value,l[e.columnKeys.optionText]=i.text,l[e.columnKeys.optionSelected]=i.selected,l["@index"]=o,i.selected&&t(n,s,l),a.push(l),l=null}),n.options=a),l=null,c=null,a=null,n.options}}();this.init=function(){this.onStateChanged=e.onStateChanged,jQuery(window).bind("resize.ax5select",function(){c.call(this)}.bind(this))},this.bind=function(t){var n,s={};return t=jQuery.extend(!0,s,e,t),t.target?(t.$target=jQuery(t.target),t.id||(t.id=t.$target.data("ax5-select")),t.id||(t.id="ax5-select-"+ax5.getGuid(),t.$target.data("ax5-select",t.id)),t.select=t.$target.find("select"),t.multiple=t.select.attr("multiple"),function(e){i.isObject(e)&&!e.error&&(t=jQuery.extend(!0,t,e))}(i.parseJson(t.$target.attr("data-ax5select"),!0)),n=i.search(this.queue,function(){return this.id==t.id}),-1===n?(this.queue.push(t),d.call(this,t,this.queue.length-1)):(jQuery.extend(!0,this.queue[n],t),d.call(this,this.queue[n],n)),s=null,n=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){return function(t,n,l){var c={};return i.isString(t)&&"undefined"==typeof n&&(n=ax5.util.search(this.queue,function(){return this.id==t}),t=this.queue[n],-1==n)?(console.log(ax5.info.getError("ax5select","402","open")),this):(this.openTimer&&clearTimeout(this.openTimer),this.activeSelectOptionGroup?this.activeSelectQueueIndex==n?this:l>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(t,n,(l||0)+1)}.bind(this),e.animateTime),this):(c.id=t.id,c.theme=t.theme,c.options=t.options,this.activeSelectOptionGroup=jQuery(ax5.mustache.render(o.call(this,e.columnKeys),c)),this.activeSelectQueueIndex=n,a.call(this,"append"),jQuery(window).bind("resize.ax5select",function(){a.call(this)}.bind(this)),jQuery(window).bind("keyup.ax5select",function(e){e=e||window.event,r.call(this,e),i.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5select",function(e){e=e||window.event,u.call(this,e),i.stopEvent(e)}.bind(this)),s.call(this,t,{self:this,state:"open",boundObject:t}),c=null,this))}}(),this.update=function(){return this},this.close=function(t){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelectOptionGroup?(t=this.queue[this.activeSelectQueueIndex],this.activeSelectOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5select"),jQuery(window).unbind("click.ax5select"),jQuery(window).unbind("keyup.ax5select"),this.closeTimer=setTimeout(function(){this.activeSelectOptionGroup&&this.activeSelectOptionGroup.remove(),this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,s.call(this,t,{self:this,state:"close"})}.bind(this),e.animateTime),this):this},this.main=function(){arguments&&i.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};e.select=function(){return i.isFunction(t)&&(n.prototype=new t),n}()}(ax5.ui,ax5.ui.root),ax5.ui.select_instance=new ax5.ui.select,$.fn.ax5select=function(){return function(e){return"undefined"==typeof e&&(e={}),$.each(this,function(){var t={target:this};e=$.extend(!0,e,t),ax5.ui.select_instance.bind(e)}),this}}();